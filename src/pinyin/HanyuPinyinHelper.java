/**
 * 
 */
package pinyin;

/**
 * @author Administrator
 * @copyright wgcwgc
 * @date 2017年10月9日
 * @time 下午4:21:38
 * @project_name tts_kdxf_demo
 * @package_name pinyin
 * @file_name HanyuPinyinHelper.java
 * @type_name HanyuPinyinHelper
 * @enclosing_type
 * @tags
 * @todo
 * @others
 * 
 */

import net.sourceforge.pinyin4j.PinyinHelper;
import net.sourceforge.pinyin4j.format.HanyuPinyinCaseType;
import net.sourceforge.pinyin4j.format.HanyuPinyinOutputFormat;
import net.sourceforge.pinyin4j.format.HanyuPinyinToneType;
import net.sourceforge.pinyin4j.format.HanyuPinyinVCharType;
import net.sourceforge.pinyin4j.format.exception.BadHanyuPinyinOutputFormatCombination;

public class HanyuPinyinHelper
{
	
	/** 
	 * 将文字转为汉语拼音
	 * @param chineselanguage 要转成拼音的中文
	 */
	public String toHanyuPinyin(String ChineseLanguage)
	{
		char [] cl_chars = ChineseLanguage.trim().toCharArray();
		String hanyupinyin = "";
		HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
		defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);// 输出拼音全部小写
//		defaultFormat.setToneType(HanyuPinyinToneType.WITH_TONE_MARK);// 带声调
//		defaultFormat.setVCharType(HanyuPinyinVCharType.WITH_U_UNICODE);
		defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);// 不带声调
		defaultFormat.setVCharType(HanyuPinyinVCharType.WITH_V);
		try
		{
			for(int i = 0 ; i < cl_chars.length ; i ++ )
			{
				if(String.valueOf(cl_chars[i]).matches("[\u4e00-\u9fa5]+"))
				{// 如果字符是中文,则将中文转为汉语拼音
					hanyupinyin += PinyinHelper.toHanyuPinyinStringArray(cl_chars[i] , defaultFormat)[0];
				}
				else
				{// 如果字符不是中文,则不转换
					hanyupinyin += cl_chars[i];
				}
			}
		}
		catch(BadHanyuPinyinOutputFormatCombination e)
		{
			e.printStackTrace();
			System.out.println("字符不能转成汉语拼音");
		}
		return hanyupinyin;
	}

	public static String getPinYin(String inputString)
	{  
        
        HanyuPinyinOutputFormat format = new HanyuPinyinOutputFormat();  
        format.setCaseType(HanyuPinyinCaseType.LOWERCASE);
        format.setToneType(HanyuPinyinToneType.WITH_TONE_MARK);
        format.setVCharType(HanyuPinyinVCharType.WITH_U_UNICODE);
  
        char[] input = inputString.trim().toCharArray();  
        StringBuffer output = new StringBuffer("");  
  
        try
        {
            for (int i = 0; i < input.length; i++)
            {  
                if (Character.toString(input[i]).matches("[\u4E00-\u9FA5]+"))
                {  
                    String[] temp = PinyinHelper.toHanyuPinyinStringArray(input[i], format);  
                    output.append(temp[0]);
                    output.append(" ");  
                }
                else  
                    output.append(Character.toString(input[i]));  
            }  
        }
        catch (BadHanyuPinyinOutputFormatCombination e)
        {  
            e.printStackTrace();  
        }  
        return output.toString();  
    }  
      

	public static String getFirstLettersUp(String ChineseLanguage)
	{
		return getFirstLetters(ChineseLanguage , HanyuPinyinCaseType.UPPERCASE);
	}
	
	public static String getFirstLettersLo(String ChineseLanguage)
	{
		return getFirstLetters(ChineseLanguage , HanyuPinyinCaseType.LOWERCASE);
	}
	
	public static String getFirstLetters(String ChineseLanguage ,
			HanyuPinyinCaseType caseType)
	{
		char [] cl_chars = ChineseLanguage.trim().toCharArray();
		String hanyupinyin = "";
		HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
		defaultFormat.setCaseType(caseType);// 输出拼音全部大写
		defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);// 不带声调
		try
		{
			for(int i = 0 ; i < cl_chars.length ; i ++ )
			{
				String str = String.valueOf(cl_chars[i]);
				if(str.matches("[\u4e00-\u9fa5]+"))
				{// 如果字符是中文,则将中文转为汉语拼音,并取第一个字母
					hanyupinyin += PinyinHelper.toHanyuPinyinStringArray(
							cl_chars[i] , defaultFormat)[0].substring(0 , 1);
				}
				else if(str.matches("[0-9]+"))
				{// 如果字符是数字,取数字
					hanyupinyin += cl_chars[i];
				}
				else if(str.matches("[a-zA-Z]+"))
				{// 如果字符是字母,取字母
					hanyupinyin += cl_chars[i];
				}
				else
				{// 否则不转换
					hanyupinyin += cl_chars[i];// 如果是标点符号的话，带着
				}
			}
		}
		catch(BadHanyuPinyinOutputFormatCombination e)
		{
			System.out.println("字符不能转成汉语拼音");
		}
		return hanyupinyin;
	}
	
	public static String getPinyinString(String ChineseLanguage)
	{
		char [] cl_chars = ChineseLanguage.trim().toCharArray();
		String hanyupinyin = "";
		HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
		defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);// 输出拼音全部大写
		defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);// 不带声调
		try
		{
			for(int i = 0 ; i < cl_chars.length ; i ++ )
			{
				String str = String.valueOf(cl_chars[i]);
				if(str.matches("[\u4e00-\u9fa5]+"))
				{// 如果字符是中文,则将中文转为汉语拼音,并取第一个字母
					hanyupinyin += PinyinHelper.toHanyuPinyinStringArray(
							cl_chars[i] , defaultFormat)[0];
				}
				else if(str.matches("[0-9]+"))
				{// 如果字符是数字,取数字
					hanyupinyin += cl_chars[i];
				}
				else if(str.matches("[a-zA-Z]+"))
				{// 如果字符是字母,取字母
				
					hanyupinyin += cl_chars[i];
				}
				else
				{// 否则不转换
				}
			}
		}
		catch(BadHanyuPinyinOutputFormatCombination e)
		{
			System.out.println("字符不能转成汉语拼音");
		}
		return hanyupinyin;
	}
	
	/**
	 * 取第一个汉字的第一个字符
	* @Title: getFirstLetter 
	* @Description: 
	* @return String   
	* @throws
	 */
	public static String getFirstLetter(String ChineseLanguage)
	{
		char [] cl_chars = ChineseLanguage.trim().toCharArray();
		String hanyupinyin = "";
		HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
		defaultFormat.setCaseType(HanyuPinyinCaseType.UPPERCASE);// 输出拼音全部大写
		defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);// 不带声调
		try
		{
			String str = String.valueOf(cl_chars[0]);
			if(str.matches("[\u4e00-\u9fa5]+"))
			{// 如果字符是中文,则将中文转为汉语拼音,并取第一个字母
				hanyupinyin = PinyinHelper.toHanyuPinyinStringArray(
						cl_chars[0] , defaultFormat)[0].substring(0 , 1);
				;
			}
			else if(str.matches("[0-9]+"))
			{// 如果字符是数字,取数字
				hanyupinyin += cl_chars[0];
			}
			else if(str.matches("[a-zA-Z]+"))
			{// 如果字符是字母,取字母
			
				hanyupinyin += cl_chars[0];
			}
			else
			{// 否则不转换
			
			}
		}
		catch(BadHanyuPinyinOutputFormatCombination e)
		{
			System.out.println("字符不能转成汉语拼音");
		}
		return hanyupinyin;
	}
	
	public static void main(String [] args)
	{
		HanyuPinyinHelper hanyuPinyinHelper = new HanyuPinyinHelper();
		System.out.println(hanyuPinyinHelper.toHanyuPinyin("某些汉字句（韵母为三音时）不能转换成带音标的汉语拼音，可能是pinyin4j.jar的问题，也可能是字符集编码的问题..."));
		System.out.println(getPinYin("某些汉字句（韵母为三音时）不能转换成带音标的汉语拼音，可能是pinyin4j.jar的问题，也可能是字符集编码的问题..."));
		
//	    {  
//	        String chs = "我是中国人! I'm Chinese!";
//	        System.out.println(chs);
//	        System.out.println(getPinYin(chs));
//	    }  
//	    System.err.println("(NOTE)");
//	    System.out.println("asdf");
//	    try
//		{
//			int string = System.in.read();
//			System.out.println(string);
//		}
//		catch(IOException e)
//		{
//			e.printStackTrace();
//		}
	}
}
